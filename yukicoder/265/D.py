n,q=map(int,input().split())
length=[1]*n
angle=[0]*n
ans=[n,0]
def rotate(i,x):

def lenchange(i,x):


def output(i):
    print()

for _ in range(q):
    s=input()
    if s[0]=="0":
        j,i,x=map(int,s)
        rotate(i,x)
    elif s[0]=="1"
        j,i,x=map(int,s)
        lenchange(i,x)
    else:
        j,i=map(int,s)
        output()
